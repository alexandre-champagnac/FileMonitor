package com.cjp.filemonitor;

import com.cjp.filemonitor.config.AppConfig;
import com.cjp.filemonitor.config.ConfigLoader;
import com.cjp.filemonitor.inputs.DirectoryMonitor;
import com.cjp.filemonitor.inputs.GlobalMonitor;
import com.cjp.filemonitor.inputs.MonitoringReport;
import com.cjp.filemonitor.mail.EmailUtils;

import javax.mail.MessagingException;
import java.io.File;
import java.io.IOException;
import java.nio.file.Path;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class Main {

    public static void main(String[] args) throws Exception {
        AppConfig appConfig = ConfigLoader.loadConfigFromIniFile(Path.of("C:\\Users\\achampag\\IdeaProjects\\FileMonitor\\src\\main\\java\\param.ini"));

        List<GlobalMonitor> monitors = new ArrayList<>();
        monitors.add(new DirectoryMonitor(Path.of(appConfig.getMonitoringDirectory())));
        monitors.add(new DirectoryMonitor(Path.of("C:\\Users\\achampag\\.tmp\\folder2")));
        long deadline = (System.currentTimeMillis() - (appConfig.getMonitoringLifespan()* 60 * 1000));
        int cpt = 1;
        EmailUtils mailSender = new EmailUtils(appConfig.getEmailTo(),  appConfig.getSmtpHostServer());
        mailSender.createSession();

        /*
        for (DirectoryMonitor dir : monitors){
            System.out.println("traitement du dossier : " + cpt );
            List<File> listOldFiles = dir.analyseDirectory(deadline);
            mailSender.sendEmail("FileMonitorCjp","Il y a " + listOldFiles.size() + "vieux fichiers. <div class=\"Stage_stageInner__3qmQ4 stageInner\"><div class=\"undefined stageContainerWrapper\"><div class=\"undefined stageContainer\" style=\"background-color: rgb(255, 255, 255);\"><div class=\"undefined stageContent\" style=\"color: rgb(0, 0, 0); font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;\"><div role=\"presentation\" tabindex=\"-1\" id=\"10-null-null\" class=\"row-container-outer StageRow_row__3D1iS StageRow_first__3gnZ6           Bee_showStructureRow__3kLAE\" style=\"background-color: transparent; background-image: none; background-position: left top; background-repeat: no-repeat; text-align: center;\"><div class=\"row-container row-labels row-labels--cs StageRow_rowLabels__ZYA4h StageRow_rowContainerInner__YbiK1\"><div class=\"hidden-row-label hidden-row-label--cs\"></div><a class=\"CommentBadge_badgeLink__1lsoT\" role=\"presentation\"></a><div class=\"row-selector StageRow_rowSelector__353d5\" data-name=\"Row\"></div><div class=\"icon-move StageRow_handle__2Pwzg\"><svg width=\"21\" height=\"20\" viewBox=\"0 0 21 20\" fill=\"none\"><path d=\"M19.9929 6.69571L17.2286 3.94429C17.0914 3.80714 16.9286 3.73857 16.74 3.73857C16.56 3.73857 16.4014 3.80714 16.2643 3.94429C16.1271 4.08143 16.0586 4.24 16.0586 4.42V5.80857H11.9186V1.65571H13.2943C13.4829 1.65571 13.6457 1.59143 13.7829 1.46286C13.92 1.32571 13.9886 1.16286 13.9886 0.974286C13.9886 0.785715 13.92 0.622857 13.7829 0.485714L11.0186 -2.27857C10.8814 -2.41571 10.7186 -2.48429 10.53 -2.48429C10.3414 -2.48429 10.1786 -2.41571 10.0414 -2.27857L7.29 0.485714C7.15286 0.622857 7.08429 0.785715 7.08429 0.974286C7.08429 1.16286 7.15286 1.32571 7.29 1.46286C7.42714 1.59143 7.58571 1.65571 7.76571 1.65571H9.15429V5.80857H5.00143V4.42C5.00143 4.24 4.93286 4.08143 4.79571 3.94429C4.66714 3.80714 4.50857 3.73857 4.32 3.73857C4.13143 3.73857 3.96857 3.80714 3.83143 3.94429L1.06714 6.69571C0.93 6.83286 0.861429 6.99571 0.861429 7.18429C0.861429 7.37286 0.93 7.53571 1.06714 7.67286L3.83143 10.4371C3.96857 10.5743 4.13143 10.6429 4.32 10.6429C4.50857 10.6429 4.66714 10.5743 4.79571 10.4371C4.93286 10.3 5.00143 10.1371 5.00143 9.94857V8.57286H9.15429V12.7129H7.76571C7.58571 12.7129 7.42714 12.7814 7.29 12.9186C7.15286 13.0557 7.08429 13.2143 7.08429 13.3943C7.08429 13.5829 7.15286 13.7457 7.29 13.8829L10.0414 16.6471C10.1786 16.7843 10.3414 16.8529 10.53 16.8529C10.7186 16.8529 10.8814 16.7843 11.0186 16.6471L13.7829 13.8829C13.92 13.7457 13.9886 13.5829 13.9886 13.3943C13.9886 13.2143 13.92 13.0557 13.7829 12.9186C13.6457 12.7814 13.4829 12.7129 13.2943 12.7129H11.9186V8.57286H16.0586V9.94857C16.0586 10.1371 16.1271 10.3 16.2643 10.4371C16.4014 10.5743 16.56 10.6429 16.74 10.6429C16.9286 10.6429 17.0914 10.5743 17.2286 10.4371L19.9929 7.67286C20.13 7.53571 20.1986 7.37286 20.1986 7.18429C20.1986 6.99571 20.13 6.83286 19.9929 6.69571Z\" transform=\"translate(0 3)\" fill=\"black\"></path></svg></div><div class=\"row-content row-content--desktop StageRow_rowContent__3QqQw\" style=\"background-color: transparent; background-image: none; background-position: left top; background-repeat: no-repeat; color: rgb(0, 0, 0); width: 500px; max-width: 500px; margin: auto; display: flex; flex-direction: row;\"><div class=\"Bee_showStructureCol__1bw7M stage__column StageColumn_column__Hupyb   StageColumn_col-md-12__Gyg8O index_col-12__3CH45 index_md-col-12__1fWRF\"><div role=\"presentation\" tabindex=\"-1\" style=\"outline: none;\"><div class=\"columnOuter undefined\" style=\"background-color: transparent; border-width: 0px; border-style: solid; border-color: transparent; padding: 5px 0px;\"><div class=\"columns undefined\"><div class=\"columns undefined\"><div role=\"presentation\" tabindex=\"-1\" id=\"10-0-0\" data-name=\"Content\" class=\"drop-target module-box       StageColumn_moduleWrapper__2zIu8   module-box--heading\"><a class=\"CommentBadge_badgeLink__1lsoT\" role=\"presentation\"></a><div class=\"icon-move StageColumn_handle__16j4z\"><svg width=\"21\" height=\"20\" viewBox=\"0 0 21 20\" fill=\"none\"><path d=\"M19.9929 6.69571L17.2286 3.94429C17.0914 3.80714 16.9286 3.73857 16.74 3.73857C16.56 3.73857 16.4014 3.80714 16.2643 3.94429C16.1271 4.08143 16.0586 4.24 16.0586 4.42V5.80857H11.9186V1.65571H13.2943C13.4829 1.65571 13.6457 1.59143 13.7829 1.46286C13.92 1.32571 13.9886 1.16286 13.9886 0.974286C13.9886 0.785715 13.92 0.622857 13.7829 0.485714L11.0186 -2.27857C10.8814 -2.41571 10.7186 -2.48429 10.53 -2.48429C10.3414 -2.48429 10.1786 -2.41571 10.0414 -2.27857L7.29 0.485714C7.15286 0.622857 7.08429 0.785715 7.08429 0.974286C7.08429 1.16286 7.15286 1.32571 7.29 1.46286C7.42714 1.59143 7.58571 1.65571 7.76571 1.65571H9.15429V5.80857H5.00143V4.42C5.00143 4.24 4.93286 4.08143 4.79571 3.94429C4.66714 3.80714 4.50857 3.73857 4.32 3.73857C4.13143 3.73857 3.96857 3.80714 3.83143 3.94429L1.06714 6.69571C0.93 6.83286 0.861429 6.99571 0.861429 7.18429C0.861429 7.37286 0.93 7.53571 1.06714 7.67286L3.83143 10.4371C3.96857 10.5743 4.13143 10.6429 4.32 10.6429C4.50857 10.6429 4.66714 10.5743 4.79571 10.4371C4.93286 10.3 5.00143 10.1371 5.00143 9.94857V8.57286H9.15429V12.7129H7.76571C7.58571 12.7129 7.42714 12.7814 7.29 12.9186C7.15286 13.0557 7.08429 13.2143 7.08429 13.3943C7.08429 13.5829 7.15286 13.7457 7.29 13.8829L10.0414 16.6471C10.1786 16.7843 10.3414 16.8529 10.53 16.8529C10.7186 16.8529 10.8814 16.7843 11.0186 16.6471L13.7829 13.8829C13.92 13.7457 13.9886 13.5829 13.9886 13.3943C13.9886 13.2143 13.92 13.0557 13.7829 12.9186C13.6457 12.7814 13.4829 12.7129 13.2943 12.7129H11.9186V8.57286H16.0586V9.94857C16.0586 10.1371 16.1271 10.3 16.2643 10.4371C16.4014 10.5743 16.56 10.6429 16.74 10.6429C16.9286 10.6429 17.0914 10.5743 17.2286 10.4371L19.9929 7.67286C20.13 7.53571 20.1986 7.37286 20.1986 7.18429C20.1986 6.99571 20.13 6.83286 19.9929 6.69571Z\" transform=\"translate(0 3)\" fill=\"black\"></path></svg></div><div class=\"\"><div class=\"content-labels content-labels--cs content-labels--heading StageColumn_contentLabels__3bydF\"><div class=\"hidden-content-label hidden-content-label--cs StageColumn_hideOnFirstRow__3fWYq\"></div><style>.item_65a07bcb-450a-4099-a532-e7b1c6dd2c15_66199cbe-4b8c-4ff9-9314-88769bd8a388_7e4ddc3f-6b9e-46a9-9597-172743630587 a:link {color: #E01253;}</style><h1 class=\"textwrapper textwrapper_item_65a07bcb-450a-4099-a532-e7b1c6dd2c15_66199cbe-4b8c-4ff9-9314-88769bd8a388_7e4ddc3f-6b9e-46a9-9597-172743630587 item_65a07bcb-450a-4099-a532-e7b1c6dd2c15_66199cbe-4b8c-4ff9-9314-88769bd8a388_7e4ddc3f-6b9e-46a9-9597-172743630587  headingmodule__wrapper \" style=\"padding: 0px; font-family: inherit; font-size: 23px; color: rgb(85, 85, 85); text-align: center; line-height: 120%; direction: ltr; min-height: 20px; font-weight: normal; margin: 0px; letter-spacing: normal;\"><span id=\"mce_855c6cef_95b4-4d07-accb-fdea658ee87a\" tabindex=\"-1\" class=\"mce-content-body\" contenteditable=\"true\" style=\"position: relative;\"><strong>CJP - FileMonitor</strong></span></h1></div></div></div></div></div></div></div></div></div></div></div><div role=\"presentation\" tabindex=\"-1\" id=\"20-null-null\" class=\"row-container-outer StageRow_row__3D1iS            Bee_showStructureRow__3kLAE\" style=\"background-color: transparent; background-image: none; background-repeat: no-repeat; background-position: left top; text-align: center;\"><div class=\"row-container row-labels row-labels--cs StageRow_rowLabels__ZYA4h StageRow_rowContainerInner__YbiK1\"><div class=\"hidden-row-label hidden-row-label--cs\"></div><a class=\"CommentBadge_badgeLink__1lsoT\" role=\"presentation\"></a><div class=\"row-selector StageRow_rowSelector__353d5\" data-name=\"Row\"></div><div class=\"icon-move StageRow_handle__2Pwzg\"><svg width=\"21\" height=\"20\" viewBox=\"0 0 21 20\" fill=\"none\"><path d=\"M19.9929 6.69571L17.2286 3.94429C17.0914 3.80714 16.9286 3.73857 16.74 3.73857C16.56 3.73857 16.4014 3.80714 16.2643 3.94429C16.1271 4.08143 16.0586 4.24 16.0586 4.42V5.80857H11.9186V1.65571H13.2943C13.4829 1.65571 13.6457 1.59143 13.7829 1.46286C13.92 1.32571 13.9886 1.16286 13.9886 0.974286C13.9886 0.785715 13.92 0.622857 13.7829 0.485714L11.0186 -2.27857C10.8814 -2.41571 10.7186 -2.48429 10.53 -2.48429C10.3414 -2.48429 10.1786 -2.41571 10.0414 -2.27857L7.29 0.485714C7.15286 0.622857 7.08429 0.785715 7.08429 0.974286C7.08429 1.16286 7.15286 1.32571 7.29 1.46286C7.42714 1.59143 7.58571 1.65571 7.76571 1.65571H9.15429V5.80857H5.00143V4.42C5.00143 4.24 4.93286 4.08143 4.79571 3.94429C4.66714 3.80714 4.50857 3.73857 4.32 3.73857C4.13143 3.73857 3.96857 3.80714 3.83143 3.94429L1.06714 6.69571C0.93 6.83286 0.861429 6.99571 0.861429 7.18429C0.861429 7.37286 0.93 7.53571 1.06714 7.67286L3.83143 10.4371C3.96857 10.5743 4.13143 10.6429 4.32 10.6429C4.50857 10.6429 4.66714 10.5743 4.79571 10.4371C4.93286 10.3 5.00143 10.1371 5.00143 9.94857V8.57286H9.15429V12.7129H7.76571C7.58571 12.7129 7.42714 12.7814 7.29 12.9186C7.15286 13.0557 7.08429 13.2143 7.08429 13.3943C7.08429 13.5829 7.15286 13.7457 7.29 13.8829L10.0414 16.6471C10.1786 16.7843 10.3414 16.8529 10.53 16.8529C10.7186 16.8529 10.8814 16.7843 11.0186 16.6471L13.7829 13.8829C13.92 13.7457 13.9886 13.5829 13.9886 13.3943C13.9886 13.2143 13.92 13.0557 13.7829 12.9186C13.6457 12.7814 13.4829 12.7129 13.2943 12.7129H11.9186V8.57286H16.0586V9.94857C16.0586 10.1371 16.1271 10.3 16.2643 10.4371C16.4014 10.5743 16.56 10.6429 16.74 10.6429C16.9286 10.6429 17.0914 10.5743 17.2286 10.4371L19.9929 7.67286C20.13 7.53571 20.1986 7.37286 20.1986 7.18429C20.1986 6.99571 20.13 6.83286 19.9929 6.69571Z\" transform=\"translate(0 3)\" fill=\"black\"></path></svg></div><div class=\"row-content row-content--desktop StageRow_rowContent__3QqQw\" style=\"background-color: transparent; color: rgb(0, 0, 0); width: 500px; background-image: none; background-repeat: no-repeat; background-position: left top; max-width: 500px; margin: auto; display: flex; flex-direction: row;\"><div class=\"Bee_showStructureCol__1bw7M stage__column StageColumn_column__Hupyb   StageColumn_col-md-12__Gyg8O index_col-12__3CH45 index_md-col-12__1fWRF\"><div role=\"presentation\" tabindex=\"-1\" style=\"outline: none;\"><div class=\"columnOuter undefined\" style=\"background-color: transparent; border-width: 0px; border-style: solid; border-color: transparent; padding: 5px 0px;\"><div class=\"columns undefined\"><div class=\"columns undefined\"><div role=\"presentation\" tabindex=\"-1\" id=\"20-0-0\" data-name=\"Content\" class=\"drop-target module-box       StageColumn_moduleWrapper__2zIu8 StageColumn_moduleWrapper--text__1yX_x  module-box--text\"><a class=\"CommentBadge_badgeLink__1lsoT\" role=\"presentation\"></a><div class=\"icon-move StageColumn_handle__16j4z\"><svg width=\"21\" height=\"20\" viewBox=\"0 0 21 20\" fill=\"none\"><path d=\"M19.9929 6.69571L17.2286 3.94429C17.0914 3.80714 16.9286 3.73857 16.74 3.73857C16.56 3.73857 16.4014 3.80714 16.2643 3.94429C16.1271 4.08143 16.0586 4.24 16.0586 4.42V5.80857H11.9186V1.65571H13.2943C13.4829 1.65571 13.6457 1.59143 13.7829 1.46286C13.92 1.32571 13.9886 1.16286 13.9886 0.974286C13.9886 0.785715 13.92 0.622857 13.7829 0.485714L11.0186 -2.27857C10.8814 -2.41571 10.7186 -2.48429 10.53 -2.48429C10.3414 -2.48429 10.1786 -2.41571 10.0414 -2.27857L7.29 0.485714C7.15286 0.622857 7.08429 0.785715 7.08429 0.974286C7.08429 1.16286 7.15286 1.32571 7.29 1.46286C7.42714 1.59143 7.58571 1.65571 7.76571 1.65571H9.15429V5.80857H5.00143V4.42C5.00143 4.24 4.93286 4.08143 4.79571 3.94429C4.66714 3.80714 4.50857 3.73857 4.32 3.73857C4.13143 3.73857 3.96857 3.80714 3.83143 3.94429L1.06714 6.69571C0.93 6.83286 0.861429 6.99571 0.861429 7.18429C0.861429 7.37286 0.93 7.53571 1.06714 7.67286L3.83143 10.4371C3.96857 10.5743 4.13143 10.6429 4.32 10.6429C4.50857 10.6429 4.66714 10.5743 4.79571 10.4371C4.93286 10.3 5.00143 10.1371 5.00143 9.94857V8.57286H9.15429V12.7129H7.76571C7.58571 12.7129 7.42714 12.7814 7.29 12.9186C7.15286 13.0557 7.08429 13.2143 7.08429 13.3943C7.08429 13.5829 7.15286 13.7457 7.29 13.8829L10.0414 16.6471C10.1786 16.7843 10.3414 16.8529 10.53 16.8529C10.7186 16.8529 10.8814 16.7843 11.0186 16.6471L13.7829 13.8829C13.92 13.7457 13.9886 13.5829 13.9886 13.3943C13.9886 13.2143 13.92 13.0557 13.7829 12.9186C13.6457 12.7814 13.4829 12.7129 13.2943 12.7129H11.9186V8.57286H16.0586V9.94857C16.0586 10.1371 16.1271 10.3 16.2643 10.4371C16.4014 10.5743 16.56 10.6429 16.74 10.6429C16.9286 10.6429 17.0914 10.5743 17.2286 10.4371L19.9929 7.67286C20.13 7.53571 20.1986 7.37286 20.1986 7.18429C20.1986 6.99571 20.13 6.83286 19.9929 6.69571Z\" transform=\"translate(0 3)\" fill=\"black\"></path></svg></div><div class=\"StageColumn_locked__3ciRC\"><div class=\"content-labels content-labels--cs content-labels--text StageColumn_contentLabels__3bydF\"><div class=\"hidden-content-label hidden-content-label--cs\"></div><div><div role=\"presentation\" class=\"textwrapper textwrapper_item_28fcdf74-17a8-4b14-8ec1-0ec5f5756987_2c3a7911-619b-4265-8070-2df7e3b7ce0c_ebcf2727-2863-4efc-96f4-fe455ffb69dc  undefined StageModuleText_stageModuleText__1IDuN editor-first undefined textmodule--firstcolumn StageModuleText_firstColumn__3iFWC \" style=\"padding: 10px; color: rgb(85, 85, 85); font-family: inherit; overflow-wrap: break-word; letter-spacing: normal;\"><div class=\"editor-outer    StageModuleText_wrapper__3kHNI item_28fcdf74-17a8-4b14-8ec1-0ec5f5756987_2c3a7911-619b-4265-8070-2df7e3b7ce0c_ebcf2727-2863-4efc-96f4-fe455ffb69dc\"><style>.item_28fcdf74-17a8-4b14-8ec1-0ec5f5756987_2c3a7911-619b-4265-8070-2df7e3b7ce0c_ebcf2727-2863-4efc-96f4-fe455ffb69dc a { \n" +
                    "                  color: #0068A5 \n" +
                    "                }.editor_item_28fcdf74-17a8-4b14-8ec1-0ec5f5756987_2c3a7911-619b-4265-8070-2df7e3b7ce0c_ebcf2727-2863-4efc-96f4-fe455ffb69dc * { \n" +
                    "                  line-height: 1.8 !important;\n" +
                    "                }</style><div class=\"editor-wrapper editorwrapper_text editor_item_28fcdf74-17a8-4b14-8ec1-0ec5f5756987_2c3a7911-619b-4265-8070-2df7e3b7ce0c_ebcf2727-2863-4efc-96f4-fe455ffb69dc StageModuleText_editorWrapper__19Z6l\"><div id=\"mce_b2b6395b_c7e7-4958-aa76-f59f513ce5d3\" tabindex=\"-1\" class=\"mce-content-body\" contenteditable=\"true\" style=\"position: relative;\"><div class=\"txtTinyMce-wrapper\" style=\"font-size: 14px; line-height: 25px;\" data-mce-style=\"font-size: 14px; line-height: 25px;\"><p style=\"font-size: 14px; line-height: 25px; word-break: break-word; text-align: center;\" data-mce-style=\"font-size: 14px; line-height: 25px; word-break: break-word; text-align: center;\">Récapitulatif d'analyse : Quels fichiers sont trop vieux pour être présents ici ?</p></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div role=\"presentation\" tabindex=\"-1\" id=\"30-null-null\" class=\"row-container-outer StageRow_row__3D1iS            Bee_showStructureRow__3kLAE\" style=\"background-color: transparent; background-image: none; background-repeat: no-repeat; background-position: left top; text-align: center;\"><div class=\"row-container row-labels row-labels--cs StageRow_rowLabels__ZYA4h StageRow_rowContainerInner__YbiK1\"><div class=\"hidden-row-label hidden-row-label--cs\"></div><a class=\"CommentBadge_badgeLink__1lsoT\" role=\"presentation\"></a><div class=\"row-selector StageRow_rowSelector__353d5\" data-name=\"Row\"></div><div class=\"icon-move StageRow_handle__2Pwzg\"><svg width=\"21\" height=\"20\" viewBox=\"0 0 21 20\" fill=\"none\"><path d=\"M19.9929 6.69571L17.2286 3.94429C17.0914 3.80714 16.9286 3.73857 16.74 3.73857C16.56 3.73857 16.4014 3.80714 16.2643 3.94429C16.1271 4.08143 16.0586 4.24 16.0586 4.42V5.80857H11.9186V1.65571H13.2943C13.4829 1.65571 13.6457 1.59143 13.7829 1.46286C13.92 1.32571 13.9886 1.16286 13.9886 0.974286C13.9886 0.785715 13.92 0.622857 13.7829 0.485714L11.0186 -2.27857C10.8814 -2.41571 10.7186 -2.48429 10.53 -2.48429C10.3414 -2.48429 10.1786 -2.41571 10.0414 -2.27857L7.29 0.485714C7.15286 0.622857 7.08429 0.785715 7.08429 0.974286C7.08429 1.16286 7.15286 1.32571 7.29 1.46286C7.42714 1.59143 7.58571 1.65571 7.76571 1.65571H9.15429V5.80857H5.00143V4.42C5.00143 4.24 4.93286 4.08143 4.79571 3.94429C4.66714 3.80714 4.50857 3.73857 4.32 3.73857C4.13143 3.73857 3.96857 3.80714 3.83143 3.94429L1.06714 6.69571C0.93 6.83286 0.861429 6.99571 0.861429 7.18429C0.861429 7.37286 0.93 7.53571 1.06714 7.67286L3.83143 10.4371C3.96857 10.5743 4.13143 10.6429 4.32 10.6429C4.50857 10.6429 4.66714 10.5743 4.79571 10.4371C4.93286 10.3 5.00143 10.1371 5.00143 9.94857V8.57286H9.15429V12.7129H7.76571C7.58571 12.7129 7.42714 12.7814 7.29 12.9186C7.15286 13.0557 7.08429 13.2143 7.08429 13.3943C7.08429 13.5829 7.15286 13.7457 7.29 13.8829L10.0414 16.6471C10.1786 16.7843 10.3414 16.8529 10.53 16.8529C10.7186 16.8529 10.8814 16.7843 11.0186 16.6471L13.7829 13.8829C13.92 13.7457 13.9886 13.5829 13.9886 13.3943C13.9886 13.2143 13.92 13.0557 13.7829 12.9186C13.6457 12.7814 13.4829 12.7129 13.2943 12.7129H11.9186V8.57286H16.0586V9.94857C16.0586 10.1371 16.1271 10.3 16.2643 10.4371C16.4014 10.5743 16.56 10.6429 16.74 10.6429C16.9286 10.6429 17.0914 10.5743 17.2286 10.4371L19.9929 7.67286C20.13 7.53571 20.1986 7.37286 20.1986 7.18429C20.1986 6.99571 20.13 6.83286 19.9929 6.69571Z\" transform=\"translate(0 3)\" fill=\"black\"></path></svg></div><div class=\"row-content row-content--desktop StageRow_rowContent__3QqQw\" style=\"background-color: transparent; color: rgb(0, 0, 0); width: 500px; background-image: none; background-repeat: no-repeat; background-position: left top; max-width: 500px; margin: auto; display: flex; flex-direction: row;\"><div class=\"Bee_showStructureCol__1bw7M stage__column StageColumn_column__Hupyb   StageColumn_col-md-12__Gyg8O index_col-12__3CH45 index_md-col-12__1fWRF\"><div role=\"presentation\" tabindex=\"-1\" style=\"outline: none;\"><div class=\"columnOuter undefined\" style=\"background-color: transparent; border-width: 0px; border-style: solid; border-color: transparent; padding: 5px 0px;\"><div class=\"columns undefined\"><div class=\"columns undefined\"><div role=\"presentation\" tabindex=\"-1\" id=\"30-0-0\" data-name=\"Content\" class=\"drop-target module-box module-box--selected StageColumn_selected__3TqTP      StageColumn_moduleWrapper__2zIu8 StageColumn_moduleWrapper--text__1yX_x  module-box--text\"><a class=\"CommentBadge_badgeLink__1lsoT\" role=\"presentation\"></a><ul class=\"edit-icons StageColumn_actions__3shHT\"><li class=\"icon-delete\"><svg width=\"18\" height=\"18\" viewBox=\"0 0 22 22\" fill=\"none\"><path d=\"M8.69927 13.1757H7.78642V4.88286H8.69927V13.1757ZM14.2278 4.88286H13.3021V13.1757H14.2278V4.88286ZM11.4636 4.88286H10.5378V13.1757H11.4636V4.88286ZM20.6693 1.20571V3.04429H18.8307V16.8529H3.1707V3.04429H1.33213V1.20571H5.93499V-2.48429H16.0664V1.20571H20.6693ZM7.78642 1.20571H14.2278V-0.645714H7.78642V1.20571ZM16.9921 3.04429H5.02213V15.0143H16.9921V3.04429Z\" transform=\"translate(0 4)\" fill=\"black\"></path></svg></li><li class=\"icon-duplicate\"><svg width=\"18\" height=\"18\" viewBox=\"0 0 22 22\" fill=\"none\"><path d=\"M16.7736 1.39857V-2.48429H1.33213V12.97H5.2407V16.8529H20.6693V1.39857H16.7736ZM18.7407 14.9243H7.16927V12.97H16.7736V3.32714H18.7407V14.9243Z\" transform=\"translate(0 4)\" fill=\"black\"></path></svg></li></ul><div class=\"icon-move StageColumn_handle__16j4z\"><svg width=\"21\" height=\"20\" viewBox=\"0 0 21 20\" fill=\"none\"><path d=\"M19.9929 6.69571L17.2286 3.94429C17.0914 3.80714 16.9286 3.73857 16.74 3.73857C16.56 3.73857 16.4014 3.80714 16.2643 3.94429C16.1271 4.08143 16.0586 4.24 16.0586 4.42V5.80857H11.9186V1.65571H13.2943C13.4829 1.65571 13.6457 1.59143 13.7829 1.46286C13.92 1.32571 13.9886 1.16286 13.9886 0.974286C13.9886 0.785715 13.92 0.622857 13.7829 0.485714L11.0186 -2.27857C10.8814 -2.41571 10.7186 -2.48429 10.53 -2.48429C10.3414 -2.48429 10.1786 -2.41571 10.0414 -2.27857L7.29 0.485714C7.15286 0.622857 7.08429 0.785715 7.08429 0.974286C7.08429 1.16286 7.15286 1.32571 7.29 1.46286C7.42714 1.59143 7.58571 1.65571 7.76571 1.65571H9.15429V5.80857H5.00143V4.42C5.00143 4.24 4.93286 4.08143 4.79571 3.94429C4.66714 3.80714 4.50857 3.73857 4.32 3.73857C4.13143 3.73857 3.96857 3.80714 3.83143 3.94429L1.06714 6.69571C0.93 6.83286 0.861429 6.99571 0.861429 7.18429C0.861429 7.37286 0.93 7.53571 1.06714 7.67286L3.83143 10.4371C3.96857 10.5743 4.13143 10.6429 4.32 10.6429C4.50857 10.6429 4.66714 10.5743 4.79571 10.4371C4.93286 10.3 5.00143 10.1371 5.00143 9.94857V8.57286H9.15429V12.7129H7.76571C7.58571 12.7129 7.42714 12.7814 7.29 12.9186C7.15286 13.0557 7.08429 13.2143 7.08429 13.3943C7.08429 13.5829 7.15286 13.7457 7.29 13.8829L10.0414 16.6471C10.1786 16.7843 10.3414 16.8529 10.53 16.8529C10.7186 16.8529 10.8814 16.7843 11.0186 16.6471L13.7829 13.8829C13.92 13.7457 13.9886 13.5829 13.9886 13.3943C13.9886 13.2143 13.92 13.0557 13.7829 12.9186C13.6457 12.7814 13.4829 12.7129 13.2943 12.7129H11.9186V8.57286H16.0586V9.94857C16.0586 10.1371 16.1271 10.3 16.2643 10.4371C16.4014 10.5743 16.56 10.6429 16.74 10.6429C16.9286 10.6429 17.0914 10.5743 17.2286 10.4371L19.9929 7.67286C20.13 7.53571 20.1986 7.37286 20.1986 7.18429C20.1986 6.99571 20.13 6.83286 19.9929 6.69571Z\" transform=\"translate(0 3)\" fill=\"black\"></path></svg></div><div class=\"StageColumn_locked__3ciRC\"><div class=\"content-labels content-labels--cs content-labels--text StageColumn_contentLabels__3bydF\"><div class=\"hidden-content-label hidden-content-label--cs\"></div><div><div role=\"presentation\" class=\"textwrapper textwrapper_item_f8eeacfe-d2c6-41f1-9ad7-b7a7ba35031b_5596f2e1-424a-4beb-9845-c9253a4ba7cf_a74a105a-803d-4edc-a6be-96cfd4688a65  undefined StageModuleText_stageModuleText__1IDuN  textmodule--firstcolumn StageModuleText_firstColumn__3iFWC module--selected\" style=\"padding: 10px; color: rgb(85, 85, 85); font-family: inherit; overflow-wrap: break-word; letter-spacing: normal;\"><div class=\"editor-outer    StageModuleText_wrapper__3kHNI item_f8eeacfe-d2c6-41f1-9ad7-b7a7ba35031b_5596f2e1-424a-4beb-9845-c9253a4ba7cf_a74a105a-803d-4edc-a6be-96cfd4688a65\"><style>.item_f8eeacfe-d2c6-41f1-9ad7-b7a7ba35031b_5596f2e1-424a-4beb-9845-c9253a4ba7cf_a74a105a-803d-4edc-a6be-96cfd4688a65 a { \n" +
                    "                  color: #0068A5 \n" +
                    "                }.editor_item_f8eeacfe-d2c6-41f1-9ad7-b7a7ba35031b_5596f2e1-424a-4beb-9845-c9253a4ba7cf_a74a105a-803d-4edc-a6be-96cfd4688a65 * { \n" +
                    "                  line-height: 1.2 !important;\n" +
                    "                }</style><div class=\"txtTinyMce-wrapper\" style=\"font-size: 14px; line-height: 16px;\" data-mce-style=\"font-size: 14px; line-height: 16px;\"><p style=\"font-size: 14px; line-height: 16px; word-break: break-word;\" data-mce-style=\"font-size: 14px; line-height: 16px; word-break: break-word;\">Récapitulatif : Il y a " + listOldFiles.size() + "&nbsp;</p></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div role=\"presentation\" tabindex=\"-1\" id=\"40-null-null\" class=\"row-container-outer StageRow_row__3D1iS            Bee_showStructureRow__3kLAE\" style=\"background-color: transparent; background-image: none; background-repeat: no-repeat; background-position: left top; text-align: center;\"><div class=\"row-container row-labels row-labels--cs StageRow_rowLabels__ZYA4h StageRow_rowContainerInner__YbiK1\"><div class=\"hidden-row-label hidden-row-label--cs\"></div><a class=\"CommentBadge_badgeLink__1lsoT\" role=\"presentation\"></a><div class=\"row-selector StageRow_rowSelector__353d5\" data-name=\"Row\"></div><div class=\"icon-move StageRow_handle__2Pwzg\"><svg width=\"21\" height=\"20\" viewBox=\"0 0 21 20\" fill=\"none\"><path d=\"M19.9929 6.69571L17.2286 3.94429C17.0914 3.80714 16.9286 3.73857 16.74 3.73857C16.56 3.73857 16.4014 3.80714 16.2643 3.94429C16.1271 4.08143 16.0586 4.24 16.0586 4.42V5.80857H11.9186V1.65571H13.2943C13.4829 1.65571 13.6457 1.59143 13.7829 1.46286C13.92 1.32571 13.9886 1.16286 13.9886 0.974286C13.9886 0.785715 13.92 0.622857 13.7829 0.485714L11.0186 -2.27857C10.8814 -2.41571 10.7186 -2.48429 10.53 -2.48429C10.3414 -2.48429 10.1786 -2.41571 10.0414 -2.27857L7.29 0.485714C7.15286 0.622857 7.08429 0.785715 7.08429 0.974286C7.08429 1.16286 7.15286 1.32571 7.29 1.46286C7.42714 1.59143 7.58571 1.65571 7.76571 1.65571H9.15429V5.80857H5.00143V4.42C5.00143 4.24 4.93286 4.08143 4.79571 3.94429C4.66714 3.80714 4.50857 3.73857 4.32 3.73857C4.13143 3.73857 3.96857 3.80714 3.83143 3.94429L1.06714 6.69571C0.93 6.83286 0.861429 6.99571 0.861429 7.18429C0.861429 7.37286 0.93 7.53571 1.06714 7.67286L3.83143 10.4371C3.96857 10.5743 4.13143 10.6429 4.32 10.6429C4.50857 10.6429 4.66714 10.5743 4.79571 10.4371C4.93286 10.3 5.00143 10.1371 5.00143 9.94857V8.57286H9.15429V12.7129H7.76571C7.58571 12.7129 7.42714 12.7814 7.29 12.9186C7.15286 13.0557 7.08429 13.2143 7.08429 13.3943C7.08429 13.5829 7.15286 13.7457 7.29 13.8829L10.0414 16.6471C10.1786 16.7843 10.3414 16.8529 10.53 16.8529C10.7186 16.8529 10.8814 16.7843 11.0186 16.6471L13.7829 13.8829C13.92 13.7457 13.9886 13.5829 13.9886 13.3943C13.9886 13.2143 13.92 13.0557 13.7829 12.9186C13.6457 12.7814 13.4829 12.7129 13.2943 12.7129H11.9186V8.57286H16.0586V9.94857C16.0586 10.1371 16.1271 10.3 16.2643 10.4371C16.4014 10.5743 16.56 10.6429 16.74 10.6429C16.9286 10.6429 17.0914 10.5743 17.2286 10.4371L19.9929 7.67286C20.13 7.53571 20.1986 7.37286 20.1986 7.18429C20.1986 6.99571 20.13 6.83286 19.9929 6.69571Z\" transform=\"translate(0 3)\" fill=\"black\"></path></svg></div><div class=\"row-content row-content--desktop StageRow_rowContent__3QqQw\" style=\"background-color: transparent; color: rgb(0, 0, 0); width: 500px; background-image: none; background-repeat: no-repeat; background-position: left top; max-width: 500px; margin: auto; display: flex; flex-direction: row;\"><div class=\"Bee_showStructureCol__1bw7M stage__column StageColumn_column__Hupyb   StageColumn_col-md-12__Gyg8O index_col-12__3CH45 index_md-col-12__1fWRF\"><div role=\"presentation\" tabindex=\"-1\" style=\"outline: none;\"><div class=\"columnOuter undefined\" style=\"background-color: transparent; border-width: 0px; border-style: solid; border-color: transparent; padding: 5px 0px;\"><div class=\"columns undefined\"><div class=\"columns undefined\"><div role=\"presentation\" tabindex=\"-1\" id=\"40-0-0\" data-name=\"Content\" class=\"drop-target module-box       StageColumn_moduleWrapper__2zIu8   module-box--image\"><a class=\"CommentBadge_badgeLink__1lsoT\" role=\"presentation\"></a><div class=\"icon-move StageColumn_handle__16j4z\"><svg width=\"21\" height=\"20\" viewBox=\"0 0 21 20\" fill=\"none\"><path d=\"M19.9929 6.69571L17.2286 3.94429C17.0914 3.80714 16.9286 3.73857 16.74 3.73857C16.56 3.73857 16.4014 3.80714 16.2643 3.94429C16.1271 4.08143 16.0586 4.24 16.0586 4.42V5.80857H11.9186V1.65571H13.2943C13.4829 1.65571 13.6457 1.59143 13.7829 1.46286C13.92 1.32571 13.9886 1.16286 13.9886 0.974286C13.9886 0.785715 13.92 0.622857 13.7829 0.485714L11.0186 -2.27857C10.8814 -2.41571 10.7186 -2.48429 10.53 -2.48429C10.3414 -2.48429 10.1786 -2.41571 10.0414 -2.27857L7.29 0.485714C7.15286 0.622857 7.08429 0.785715 7.08429 0.974286C7.08429 1.16286 7.15286 1.32571 7.29 1.46286C7.42714 1.59143 7.58571 1.65571 7.76571 1.65571H9.15429V5.80857H5.00143V4.42C5.00143 4.24 4.93286 4.08143 4.79571 3.94429C4.66714 3.80714 4.50857 3.73857 4.32 3.73857C4.13143 3.73857 3.96857 3.80714 3.83143 3.94429L1.06714 6.69571C0.93 6.83286 0.861429 6.99571 0.861429 7.18429C0.861429 7.37286 0.93 7.53571 1.06714 7.67286L3.83143 10.4371C3.96857 10.5743 4.13143 10.6429 4.32 10.6429C4.50857 10.6429 4.66714 10.5743 4.79571 10.4371C4.93286 10.3 5.00143 10.1371 5.00143 9.94857V8.57286H9.15429V12.7129H7.76571C7.58571 12.7129 7.42714 12.7814 7.29 12.9186C7.15286 13.0557 7.08429 13.2143 7.08429 13.3943C7.08429 13.5829 7.15286 13.7457 7.29 13.8829L10.0414 16.6471C10.1786 16.7843 10.3414 16.8529 10.53 16.8529C10.7186 16.8529 10.8814 16.7843 11.0186 16.6471L13.7829 13.8829C13.92 13.7457 13.9886 13.5829 13.9886 13.3943C13.9886 13.2143 13.92 13.0557 13.7829 12.9186C13.6457 12.7814 13.4829 12.7129 13.2943 12.7129H11.9186V8.57286H16.0586V9.94857C16.0586 10.1371 16.1271 10.3 16.2643 10.4371C16.4014 10.5743 16.56 10.6429 16.74 10.6429C16.9286 10.6429 17.0914 10.5743 17.2286 10.4371L19.9929 7.67286C20.13 7.53571 20.1986 7.37286 20.1986 7.18429C20.1986 6.99571 20.13 6.83286 19.9929 6.69571Z\" transform=\"translate(0 3)\" fill=\"black\"></path></svg></div><div class=\"StageColumn_locked__3ciRC\"><div class=\"content-labels content-labels--cs content-labels--image StageColumn_contentLabels__3bydF\"><div class=\"hidden-content-label hidden-content-label--cs\"></div><div class=\"center autowidth\"><div class=\"image-wrap     StageModuleImage_sidebarModule__175-l\" style=\"width: 100%; padding: 0px;\"><div class=\"StageModuleImage_uploaderDropZone__Va43T  \"><img class=\"imagemodule__img \" width=\"500\" src=\"https://d15k2d11r6t6rl.cloudfront.net/public/users/BeeFree/beefree-dj963sa77wg/logo_cjp.png\" alt=\"\"></div></div><div class=\"StageModuleImage_clickableLayer__xiNlN\"></div></div></div></div></div></div></div></div></div></div></div></div></div><div role=\"presentation\" tabindex=\"-1\" id=\"50-null-null\" class=\"row-container-outer StageRow_row__3D1iS     StageRow_locked__NWWfN row-container-outer--locked       Bee_showStructureRow__3kLAE\" style=\"background-color: transparent; background-image: none; background-position: left top; background-repeat: no-repeat; text-align: center;\"><div class=\"row-container row-labels row-labels--cs StageRow_rowLabels__ZYA4h StageRow_rowContainerInner__YbiK1\"><div class=\"hidden-row-label hidden-row-label--cs\"></div><a class=\"CommentBadge_badgeLink__1lsoT\" role=\"presentation\"></a><div class=\"row-selector StageRow_rowSelector__353d5\" data-name=\"Row\"></div><div class=\"row-content row-content--desktop StageRow_rowContent__3QqQw\" style=\"background-color: transparent; background-image: none; background-position: left top; background-repeat: no-repeat; color: rgb(0, 0, 0); width: 500px; max-width: 500px; margin: auto; display: flex; flex-direction: row;\"><div class=\"Bee_showStructureCol__1bw7M stage__column StageColumn_column__Hupyb   StageColumn_col-md-12__Gyg8O index_col-12__3CH45 index_md-col-12__1fWRF\"><div role=\"presentation\" tabindex=\"-1\" style=\"outline: none;\"><div class=\"columnOuter undefined\" style=\"background-color: transparent; border-width: 0px; border-style: solid; border-color: transparent; padding: 5px 0px;\"><div class=\"columns undefined\"><div class=\"columns undefined\"><div role=\"presentation\" tabindex=\"-1\" id=\"50-0-0\" data-name=\"Content\" class=\"drop-target module-box  StageColumn_lastRow__3M24B    StageColumn_locked__3ciRC module-box--locked StageColumn_moduleWrapper__2zIu8   module-box--icons\"><a class=\"CommentBadge_badgeLink__1lsoT\" role=\"presentation\"></a><div class=\"StageColumn_locked__3ciRC\"><div class=\"content-labels content-labels--cs content-labels--icons StageColumn_contentLabels__3bydF\"><div class=\"hidden-content-label hidden-content-label--cs\"></div><div class=\" StageModuleIcons_wrapper__3S6jn\" style=\"color: rgb(157, 157, 157); font-family: inherit; font-size: 15px; padding: 5px 0px; text-align: center; letter-spacing: normal;\"><div class=\"icons__item StageModuleIcons_position--right__1sSlu StageModuleIcons_item__3amcl\" style=\"text-align: center; padding-left: 0px; padding-right: 0px;\"><div class=\"StageModuleIcons_itemRow__19ESw StageModuleIcons_itemTopRow__2DL3L\" style=\"padding-left: 5px; padding-right: 6px;\"></div><div class=\"StageModuleIcons_itemRow__19ESw StageModuleIcons_itemMiddleRow__12Z_b\" style=\"padding-top: 5px; padding-bottom: 5px;\"><div class=\"StageModuleIcons_itemIcon__12fLq \" style=\"padding-left: 5px; padding-right: 6px;\"><img src=\"https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/BeeProAgency/53601_510656/Signature/bee.png\" height=\"32\" width=\"34.32343234323432\" alt=\"Designed with BEE\" title=\"Designed with BEE\" style=\"min-width: 34.3234px;\"></div><div class=\"StageModuleIcons_itemText__2X74I\" style=\"text-align: center;\"><a href=\"https://www.designedwithbee.com/\" title=\"Designed with BEE\" target=\"_blank\" style=\"color: rgb(157, 157, 157); text-decoration: none;\">Designed with BEE</a></div></div><div class=\"StageModuleIcons_itemRow__19ESw StageModuleIcons_itemBottomRow__20swb\" style=\"text-align: center; padding-left: 5px; padding-right: 6px;\"></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div>");
            cpt++;
        }

        */



      for(GlobalMonitor monitor : monitors){

            MonitoringReport report = monitor.analyse(deadline);
            mailSender.sendEmail("Recap FileMonitoring", report.toHTMLReport());


        }





    }

}
